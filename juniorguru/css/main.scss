// See:
// * https://gregrickaby.com/2013/05/using-the-golden-ratio-and-rems/
// * https://grtcalculator.com/
$font-base: 20;
$line-height-base: 34;

$line-height-0: ($line-height-base / 18);
$line-height: ($line-height-base / 10) * 1rem;
$line-height-2: ($line-height-base / 25);
$line-height-3: ($line-height-base / 32);
$line-height-4: ($line-height-base / 41);

@mixin font-0 { font-size: 1.6rem; line-height: $line-height-0; font-weight: 300; }
@mixin font { font-size: 2rem; line-height: $line-height; }
@mixin font-2 { font-size: 2.5rem; line-height: $line-height-2; }
@mixin font-3 { font-size: 3.2rem; line-height: $line-height-3; }
@mixin font-4 { font-size: 4.1rem; line-height: $line-height-4; }

$black-number: "343434"; // when changing, change it also in logo.svg
$blue-number: "1755d1";

$white: #ffffff;
$black: unquote("##{$black-number}");
$yellow: #fffa72;
$blue: unquote("##{$blue-number}");
$grey: #ababab;

$grid-breakpoint: 900px;
$grid-block-size: 28rem;

$dots-black: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23#{$black-number}' fill-opacity='1' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
$dots-blue: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23#{$blue-number}' fill-opacity='1' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");

$whitespace-0: 0.8rem;
$whitespace: 1.3rem;
$whitespace-2: 2.1rem;
$whitespace-3: 3.4rem;


@mixin hyphens { -webkit-hyphens: auto; -moz-hyphens: auto; -ms-hyphens: auto; hyphens: auto; }

@mixin skew($n) { transform: skew($n); -o-transform: skew($n); -moz-transform: skew($n); -webkit-transform: skew($n); }

@mixin page-width {
  & { max-width: 73rem; margin-left: auto; margin-right: auto; }
  @supports (display: grid) { & { max-width: 103rem; } }
}

@mixin arrow {
  & {
    box-sizing: border-box;
    border-right: none;
    position: relative;
    overflow: visible;
  }

  &:before, &:after {
    content: "";
    display: block;
    box-sizing: border-box;
    background: $white;
    width: 50%;
    height: 100%;
    position: absolute;
    right: -50%;
  }

  &:before {
    top: -1.5px;
    @include skew(15deg);
  }

  &:after {
    bottom: -1.5px;
    @include skew(-15deg);
  }
}


html {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 62.5%; // = 10px, rem base
}

html, body {
  background: $white;
}

html, a {
  color: $black;
}

h4, h3, h2, h1, html, body {
  margin: 0;
  padding: 0;
}

small {
  @include font-0;
}

body, h4 {
  @include font;
}

p {
  margin-top: $whitespace-0;
}

p, h4 {
  margin-bottom: $whitespace-0;
}

h3 {
  @include font-2;
  margin-bottom: $whitespace;
}

h2 {
  @include font-3;
  margin-bottom: $whitespace-2;
}

h1 {
  @include font-4;
  margin-bottom: $whitespace-3;
}

ul, ol {
  margin-bottom: $whitespace-3;
}

ul li {
  list-style-type: square;
}

nav ol, nav li {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

body > * {
  padding-left: $whitespace;
  padding-right: $whitespace;
}

main {
  @include page-width;
}

main > header {
  max-width: 80rem;
  margin-left: auto;
  margin-right: auto;
  margin-top: $whitespace-3 * 3;

  h1 {
    margin-top: 0;
    text-align: center;
    margin-bottom: $whitespace-3 * 2;
  }

  p {
    @include font-2;
  }

  ul {
    margin-top: $whitespace-3 * 2;
    text-align: center;
    background: $dots-black;
    padding: $whitespace;

    &, li {
      list-style-type: none;
    }

    li {
      display: inline;
      background: $white;
      padding: 0.3rem 0.8rem;
      margin: 0 0.3rem;
      line-height: $line-height-0;
    }

    a {
      white-space: nowrap;
      text-decoration: none;
    }
  }
}

main > header, main > section, main > details {
  margin-bottom: $whitespace-3 * 2;
}

main > section, main > details {
  h2 {
    display: inline-block;
    background-color: $yellow;
    padding: 0.3rem 0.5rem;
    position: relative;
  }

  h3 {
    margin-top: $whitespace-3;
  }
}

main > details {
  & > summary {
    display: inline-block;
    cursor: pointer;
    list-style-type: none;
    &::-webkit-details-marker, &::before { display: none; }

    h2 {
      padding-right: $whitespace;
    }

    &::after {
      display: block;
      float: right;
      box-sizing: border-box;
      min-width: $whitespace-3;
      text-align: center;
      padding: 0.3rem 0.5rem;
      content: "▸";
      background: $black;
      color: $white;
    }
  }

  & > summary:hover,
  & > summary:focus,
  & > summary:active,
  &[open] > summary {
    h2 {
      background-color: $blue;
      color: $white;
    }

    &::after {
      content: "▾";
      background-color: $blue;
      color: $white;
    }
  }
}

a {
  &:hover, &:focus, &:active {
    color: $blue;
  }

  &.button {
    display: inline-block;
    color: $white;
    text-decoration: none;
    @include font-2;
    font-weight: 300;
    background: $black;
    padding: $whitespace $whitespace-2;
    padding-top: $whitespace - 0.1rem;

    &:hover, &:focus, &:active {
      color: $white;
      background: $blue;
    }
  }
}

hr {
  border: none;
  height: 2px;
  background: $dots-black;
  margin: $whitespace-3 0;
}

body > header + hr {
  display: none;
}

.note {
  @include font-0;
}

.side-note {
  border: $black 1px dotted;
  padding: $whitespace-2;
  margin: $whitespace-3 0;
}

figure.quote {
  background: $dots-blue;
  color: $blue;
  margin: $whitespace-3 0;
  padding: $whitespace;
  position: relative;

  blockquote, figcaption {
    background: $white;
    padding: $whitespace-2;
  }

  blockquote {
    @include font-2;
    font-weight: bold;
    margin: 0;
    padding-bottom: 0;
    text-transform: uppercase;
  }

  &::after {
    text-align: right;
    position: absolute;
    bottom: 0;
    right: 0;
    font-size: 15rem;
  }

  figcaption {
    padding-top: 0;
  }

  figcaption::before {
    content: "—";
  }
}

html[lang="cs"] figure::after {
  content: "“"; // https://www.zoul.cz/uvozovky/
}

html[lang="en"] figure::after {
  content: "”"; // https://www.zoul.cz/uvozovky/
}

ul.list {
  padding: 0;
  margin: $whitespace-3 0;

  @media screen and (min-width: $grid-breakpoint) {
    @supports (display: grid) {
      & {
        display: grid;
        grid-gap: $whitespace;
        grid-row-gap: $whitespace-2;
        grid-template-columns: repeat(auto-fit, minmax($grid-block-size, 1fr));
      }
    }
  }

  & > li {
    list-style-type: none;
    margin: 0 auto;
    margin-bottom: $whitespace-2;
    max-width: 65rem;

    @media screen and (min-width: $grid-breakpoint) {
      @supports (display: grid) {
        & {
          max-width: auto;
          margin: 0;
        }
      }
    }

    h3, p {
      display: inline-block;
      background: $white;
      margin-left: $whitespace;
      margin-right: $whitespace;
      padding: 0.3rem 0.5rem;
    }

    h3 {
      margin-top: $whitespace;
    }

    p {
      margin-bottom: $whitespace;

      small {
        margin-top: 0.5rem;
        display: inline-block;
        font-size: 1.5rem;
      }
    }

    & > a {
      display: block;
      text-decoration: none;
      position: relative;
      background: $dots-black;
    }

    & > a:hover, & > a:focus, & > a:active,
    &:hover > a, &:focus > a, &:active > a {
      background: none;
      color: $blue;

      img {
        filter: grayscale(0%);
        opacity: 0.7;
      }

      ul li small {
        background: $blue;
      }
    }

    &:hover, &:focus, &:active {
      background: $dots-blue;
      color: $blue;

      a { color: $blue; }
    }
  }
}

.list-labels {
  position: absolute;
  top: 0;
  right: 0;

  &, li {
    margin: 0;
    padding: 0;
  }

  li {
    list-style-type: none;
    display: block;
    text-align: right;
  }

  small {
    display: inline;
    background: $black;
    color: $white;
    padding: 0.4rem 1rem 0.5rem 1rem;
  }
}

.list-image {
  box-shadow: inset 0 0 $whitespace-2 rgba(190, 190, 190, 0.8);

  // https://www.codecaptain.io/blog/web-development/responsive-images-and-preventing-page-reflow/474
  height: 0;
  padding-top: 56.25%; // images are 640x360, which means 36/64 = 0.5625
  position: relative;

  img {
    display: block;
    opacity: 0.6;
    filter: grayscale(50%);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}

.list-note {
  margin: $whitespace-2 0;
  text-align: center;
  color: $grey;

  a {
    color: $grey;
  }

  a:hover, a:focus, a:active {
    color: $blue;
  }
}

.call-to-action {
  text-align: center;
  margin: $whitespace-2 0 $whitespace-3 0;

  &.next {
    overflow: hidden;

    .button {
      display: inline-block;
      background: $black;
      padding-right: $whitespace-3;
      margin-top: $whitespace-3;
      @include arrow;

      &:hover, &:focus, &:active {
        background: $blue;
      }
    }
  }
}

body > header {
  padding: 0;
  margin-bottom: $whitespace-3;
  background: $yellow;

  nav {
    @include page-width;
    display: flex;
    justify-content: space-between;
    padding: 0 $whitespace;
  }

  .logo {
    display: block;
    align-self: center;

    img {
      display: block;
      height: 5.5rem;
    }
  }

  ol {
    align-self: flex-end;
    display: flex;
    @include font-2;
    overflow: hidden;

    li {
      margin-left: $whitespace-0;
      padding-top: $whitespace-0;
    }

    a {
      box-sizing: border-box;
      display: block;
      background: $black;
      color: $white;
      text-decoration: none;
      padding: $whitespace $whitespace-2;
    }

    a::before {
      box-sizing: border-box;
      display: block;
      float: left;
      text-align: center;
      margin-right: $whitespace;
      font-weight: bold;
    }

    li:nth-child(1) a::before { content: "1"; }
    li:nth-child(2) a::before { content: "2"; }
    li:nth-child(3) a::before { content: "3"; }
  }

  @media screen and (max-width: 810px) {
    .logo img {
      height: 4rem;
    }

    ol a::before {
      float: none;
      margin: 0 0.3rem;
    }

    ol a span {
      display: none;
    }
  }
}

body > header ol a:hover,
body > header ol a:focus,
body > header ol a:active {
  &, &::before {
    background: $blue;
    color: $white;
  }
}

body.page-learn > header li:nth-child(1) a,
body.page-practice > header li:nth-child(2) a,
body.page-jobs > header li:nth-child(3) a {
  &, &::before {
    background: $white;
    color: $blue;
  }
}

footer {
  padding: 0 $whitespace;
  padding-bottom: $whitespace-3;

  &, a {
    @include font-0;
  }

  address {
    display: flex;
    flex-wrap: wrap;
  }

  address, p {
    font-style: normal;
    @include page-width;
    margin-bottom: $whitespace;
  }

  @media screen and (min-width: 650px) {
    address {
      justify-content: center;
    }

    p {
      text-align: center;
    }
  }
}

body.page-index {
  main {
    max-width: 100%;
    padding: 0;
  }

  nav, aside {
    @include page-width;
    padding-left: $whitespace;
    padding-right: $whitespace;
  }

  & > header {
    padding: 0;
    padding-top: $whitespace-2;
    margin-bottom: $whitespace-3;
    background: $yellow;

    .logo {
      display: block;
      margin: 0;
      text-align: center;

      img {
        display: block;
        margin: 0 auto;
        height: 12rem;
      }
    }
  }

  .tagline {
    background: $black;
    color: $white;
    font-weight: 300;
    @include font-2;
    margin: 0;
    margin-top: $whitespace-2;

    @media screen and (min-width: 650px) {
      & {
        text-align: center;
      }
    }

    p {
      margin: 0;
      @include page-width;
      padding: $whitespace $whitespace-2;
    }
  }

  nav {
    ol {
      @media screen and (min-width: $grid-breakpoint) {
        @supports (display: grid) {
          & {
            display: grid;
            grid-gap: $whitespace;
            grid-template-columns: repeat(auto-fit, minmax($grid-block-size, 1fr));
          }
        }
      }
    }

    li {
      overflow: hidden;
      margin: auto;
      margin-bottom: $whitespace;
      max-width: 65rem;

      @media screen and (min-width: $grid-breakpoint) {
        @supports (display: grid) {
          & {
            max-width: auto;
            margin: 0;
          }
        }
      }

      a {
        display: block;
        padding: $whitespace;
        padding-right: 5.5rem;
        background: $dots-black;
        height: 100%;
        text-decoration: none;
        @include arrow;
      }

      a:hover, a:focus, a:active {
        background: $dots-blue;

        * {
          color: $blue;
        }

        h2::before {
          color: $white;
          background: $blue;
        }
      }

      p {
        box-sizing: border-box;
        background: $white;
        padding: 0.3rem 0.5rem;
        @include font-0;
        line-height: $line-height;
        @include hyphens;
      }
    }

    h2 {
      display: inline-block;
      background: $white;
      padding: 0.3rem 0.5rem;
      @include font-2;
      margin-bottom: $whitespace;
    }

    h2::before {
      display: block;
      padding: 0.3rem 1.5rem;
      background: $yellow;
      position: absolute;
      top: 0;
      right: 0;
    }

    li:nth-child(1) h2::before { content: "1"; }
    li:nth-child(2) h2::before { content: "2"; }
    li:nth-child(3) h2::before { content: "3"; }
  }

  aside {
    @supports (display: grid) {
      & {
        display: grid;
        grid-gap: $whitespace-3 $whitespace-2;
        grid-template-columns: repeat(auto-fit, minmax($grid-block-size, 1fr));
      }
    }

    section {
      margin-bottom: $whitespace;

      @supports (display: grid) {
        & {
          margin: 0;
        }
      }
    }

    .call-to-action, .note {
      text-align: left;
    }

    .companies .call-to-action, .note {
      margin-bottom: 0;
    }
  }
}
